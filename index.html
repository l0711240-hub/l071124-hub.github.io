<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µìœ  ì•½ì† ì¡ê¸° ë‹¬ë ¥ 2026</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 0.9em;
        }

        .user-setup {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .user-input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .input-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="text"] {
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        input[type="color"] {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        button {
            padding: 10px 25px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 500;
        }

        button:hover {
            background: #5568d3;
        }

        button.danger {
            background: #e74c3c;
        }

        button.danger:hover {
            background: #c0392b;
        }

        .participants {
            margin-top: 20px;
        }

        .participant-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .participant-tag {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s, opacity 0.2s;
        }

        .participant-tag:hover {
            transform: translateY(-2px);
        }

        .participant-tag.active {
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .participant-tag .remove {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.8;
            margin-left: 5px;
        }

        .participant-tag .remove:hover {
            opacity: 1;
        }

        .current-user {
            background: rgba(102, 126, 234, 0.1);
            border: 2px dashed #667eea;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .current-user strong {
            color: #667eea;
            font-size: 1.1em;
        }

        .instructions {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .instructions p {
            margin: 5px 0;
            color: #856404;
        }

        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .legend-box {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            border: 2px solid #ddd;
        }

        .legend-box.available {
            background: #2ecc71;
            border-color: #27ae60;
        }

        .legend-box.unavailable {
            background: #e74c3c;
            border-color: #c0392b;
        }

        .legend-box.partial {
            background: linear-gradient(135deg, #f39c12 50%, #e67e22 50%);
            border-color: #d68910;
        }

        .calendars {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .calendar {
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .calendar-header {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }

        .weekday {
            text-align: center;
            font-weight: bold;
            color: #666;
            padding: 10px 0;
            font-size: 0.9em;
        }

        .weekday.sunday {
            color: #e74c3c;
        }

        .weekday.saturday {
            color: #3498db;
        }

        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            background: white;
            padding: 5px;
        }

        .day:hover:not(.empty) {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .day.empty {
            cursor: default;
            border: none;
        }

        .day.empty:hover {
            transform: none;
        }

        .day.all-available {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            border-color: #27ae60;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(46, 204, 113, 0.3);
        }

        .day.all-available .day-number {
            color: white;
        }

        .day.all-unavailable {
            background: #f8f9fa;
            opacity: 0.5;
            cursor: not-allowed;
        }

        .day.all-unavailable:hover {
            transform: none;
            border-color: #eee;
        }

        .day-number {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .day.sunday .day-number {
            color: #e74c3c;
        }

        .day.saturday .day-number {
            color: #3498db;
        }

        .day.all-available.sunday .day-number,
        .day.all-available.saturday .day-number {
            color: white;
        }

        .day-info {
            font-size: 0.7em;
            text-align: center;
            margin-top: 2px;
        }

        .day-markers {
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 100%;
            margin-top: 3px;
        }

        .marker {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.5);
        }

        .best-dates {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            border-radius: 15px;
            color: white;
        }

        .best-dates h2 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .best-date-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .best-date-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .reset-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #ddd;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“… ê³µìœ  ì•½ì† ì¡ê¸° ë‹¬ë ¥ 2026</h1>
        <div class="subtitle">ğŸŒ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‘ê°€ í•¨ê»˜ ë³´ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>
        
        <div class="instructions">
            <p>ğŸ’¡ <strong>ì‚¬ìš©ë°©ë²•:</strong></p>
            <p>1. ì´ë¦„ê³¼ ìƒ‰ìƒì„ ì„ íƒí•˜ê³  'ì°¸ê°€í•˜ê¸°' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”</p>
            <p>2. ë‹¬ë ¥ì—ì„œ <strong>ì•ˆ ë˜ëŠ” ë‚ ì§œ</strong>ë¥¼ í´ë¦­í•˜ì—¬ í‘œì‹œí•˜ì„¸ìš” (ì—¬ëŸ¬ ê°œ ì„ íƒ ê°€ëŠ¥)</p>
            <p>3. <strong>ì´ˆë¡ìƒ‰</strong>ìœ¼ë¡œ í‘œì‹œëœ ë‚ ì§œëŠ” ëª¨ë‘ê°€ ê°€ëŠ¥í•œ ìµœì ì˜ ë‚ ì§œì…ë‹ˆë‹¤!</p>
            <p>4. ëª¨ë“  ë³€ê²½ì‚¬í•­ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ê³µìœ ë©ë‹ˆë‹¤</p>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-box available"></div>
                <span>ëª¨ë‘ ê°€ëŠ¥í•œ ë‚ </span>
            </div>
            <div class="legend-item">
                <div class="legend-box partial"></div>
                <span>ì¼ë¶€ ë¶ˆê°€ëŠ¥</span>
            </div>
            <div class="legend-item">
                <div class="legend-box unavailable"></div>
                <span>ëª¨ë‘ ë¶ˆê°€ëŠ¥</span>
            </div>
        </div>

        <div class="user-setup">
            <div class="user-input-group">
                <div class="input-wrapper">
                    <label>ì´ë¦„:</label>
                    <input type="text" id="userName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <div class="input-wrapper">
                    <label>ìƒ‰ìƒ:</label>
                    <input type="color" id="userColor" value="#667eea">
                </div>
                <button onclick="addParticipant()">ì°¸ê°€í•˜ê¸°</button>
            </div>
            
            <div class="participants">
                <p style="font-weight: 600; margin-bottom: 10px;">ì°¸ê°€ì ëª©ë¡ (<span id="participantCount">0</span>ëª…):</p>
                <div class="participant-list" id="participants"></div>
            </div>

            <div class="reset-section">
                <button class="danger" onclick="resetCalendar()">ğŸ—‘ï¸ ì „ì²´ ì´ˆê¸°í™”</button>
                <p style="font-size: 0.85em; color: #666; margin-top: 5px;">ëª¨ë“  ì°¸ê°€ìì™€ ì¼ì •ì„ ì‚­ì œí•©ë‹ˆë‹¤</p>
            </div>
        </div>

        <div id="currentUserDisplay" class="current-user" style="display: none;">
            í˜„ì¬ ì„ íƒ ì¤‘: <strong id="currentUserName"></strong> (ì•ˆ ë˜ëŠ” ë‚ ì„ í´ë¦­í•˜ì„¸ìš”)
        </div>

        <div class="calendars">
            <div class="calendar">
                <div class="calendar-header">2026ë…„ 1ì›”</div>
                <div class="weekdays">
                    <div class="weekday sunday">ì¼</div>
                    <div class="weekday">ì›”</div>
                    <div class="weekday">í™”</div>
                    <div class="weekday">ìˆ˜</div>
                    <div class="weekday">ëª©</div>
                    <div class="weekday">ê¸ˆ</div>
                    <div class="weekday saturday">í† </div>
                </div>
                <div class="days" id="january"></div>
            </div>

            <div class="calendar">
                <div class="calendar-header">2026ë…„ 2ì›”</div>
                <div class="weekdays">
                    <div class="weekday sunday">ì¼</div>
                    <div class="weekday">ì›”</div>
                    <div class="weekday">í™”</div>
                    <div class="weekday">ìˆ˜</div>
                    <div class="weekday">ëª©</div>
                    <div class="weekday">ê¸ˆ</div>
                    <div class="weekday saturday">í† </div>
                </div>
                <div class="days" id="february"></div>
            </div>
        </div>

        <div class="best-dates" id="bestDatesSection">
            <h2>ğŸ¯ ëª¨ë‘ ê°€ëŠ¥í•œ ìµœì ì˜ ë‚ ì§œ</h2>
            <div id="bestDates">
                <p>ì°¸ê°€ìë¥¼ ì¶”ê°€í•˜ê³  ì•ˆ ë˜ëŠ” ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
            </div>
        </div>
    </div>

    <script>
        let participants = [];
        let currentParticipant = null;
        let unavailability = {}; // {participantName: [dates]}
        let isLoading = true;

        // Load data from persistent storage
        async function loadData() {
            try {
                const participantsData = await window.storage.get('calendar-participants', true);
                const unavailabilityData = await window.storage.get('calendar-unavailability', true);

                if (participantsData) {
                    participants = JSON.parse(participantsData.value);
                }

                if (unavailabilityData) {
                    unavailability = JSON.parse(unavailabilityData.value);
                }

                isLoading = false;
                updateParticipantsDisplay();
                renderCalendars();
                updateBestDates();
            } catch (error) {
                console.log('No previous data found, starting fresh');
                isLoading = false;
            }
        }

        // Save data to persistent storage
        async function saveData() {
            try {
                await window.storage.set('calendar-participants', JSON.stringify(participants), true);
                await window.storage.set('calendar-unavailability', JSON.stringify(unavailability), true);
            } catch (error) {
                console.error('Error saving data:', error);
            }
        }

        // Sync data periodically to get updates from others
        async function syncData() {
            if (isLoading) return;
            
            try {
                const participantsData = await window.storage.get('calendar-participants', true);
                const unavailabilityData = await window.storage.get('calendar-unavailability', true);

                let needsUpdate = false;

                if (participantsData && participantsData.value !== JSON.stringify(participants)) {
                    participants = JSON.parse(participantsData.value);
                    needsUpdate = true;
                }

                if (unavailabilityData && unavailabilityData.value !== JSON.stringify(unavailability)) {
                    unavailability = JSON.parse(unavailabilityData.value);
                    needsUpdate = true;
                }

                if (needsUpdate) {
                    updateParticipantsDisplay();
                    renderCalendars();
                    updateBestDates();
                }
            } catch (error) {
                // Silent error - no data yet
            }
        }

        function addParticipant() {
            const name = document.getElementById('userName').value.trim();
            const color = document.getElementById('userColor').value;

            if (!name) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            if (participants.some(p => p.name === name)) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤!');
                return;
            }

            const participant = { name, color };
            participants.push(participant);
            currentParticipant = participant;
            
            // Initialize empty unavailability for new participant
            if (!unavailability[name]) {
                unavailability[name] = [];
            }

            saveData();
            updateParticipantsDisplay();
            document.getElementById('userName').value = '';
            document.getElementById('userColor').value = '#' + Math.floor(Math.random()*16777215).toString(16);
        }

        function updateParticipantsDisplay() {
            const container = document.getElementById('participants');
            const countDisplay = document.getElementById('participantCount');
            countDisplay.textContent = participants.length;
            
            container.innerHTML = '';
            
            if (participants.length === 0) {
                container.innerHTML = '<p style="color: #999; font-style: italic;">ì•„ì§ ì°¸ê°€ìê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            participants.forEach(p => {
                const tag = document.createElement('div');
                tag.className = 'participant-tag';
                if (currentParticipant && currentParticipant.name === p.name) {
                    tag.classList.add('active');
                }
                tag.style.backgroundColor = p.color;
                
                const unavailableCount = unavailability[p.name] ? unavailability[p.name].length : 0;
                
                tag.innerHTML = `
                    <span>${p.name} (${unavailableCount}ì¼ ë¶ˆê°€)</span>
                    <span class="remove" onclick="removeParticipant('${p.name}')">Ã—</span>
                `;
                tag.onclick = (e) => {
                    if (!e.target.classList.contains('remove')) {
                        selectParticipant(p);
                    }
                };
                container.appendChild(tag);
            });

            updateCurrentUserDisplay();
        }

        function selectParticipant(participant) {
            currentParticipant = participant;
            updateParticipantsDisplay();
        }

        function updateCurrentUserDisplay() {
            const display = document.getElementById('currentUserDisplay');
            const nameDisplay = document.getElementById('currentUserName');
            
            if (currentParticipant) {
                display.style.display = 'block';
                nameDisplay.textContent = currentParticipant.name;
                nameDisplay.style.color = currentParticipant.color;
            } else {
                display.style.display = 'none';
            }
        }

        function removeParticipant(name) {
            if (!confirm(`${name}ë‹˜ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            participants = participants.filter(p => p.name !== name);
            delete unavailability[name];

            if (currentParticipant && currentParticipant.name === name) {
                currentParticipant = participants[0] || null;
            }

            saveData();
            updateParticipantsDisplay();
            renderCalendars();
            updateBestDates();
        }

        function toggleDate(year, month, day) {
            if (!currentParticipant) {
                alert('ë¨¼ì € ì°¸ê°€ìë¥¼ ì„ íƒí•˜ê±°ë‚˜ ì¶”ê°€í•´ì£¼ì„¸ìš”!');
                return;
            }

            const dateKey = `${year}-${month}-${day}`;
            
            if (!unavailability[currentParticipant.name]) {
                unavailability[currentParticipant.name] = [];
            }

            const index = unavailability[currentParticipant.name].indexOf(dateKey);
            
            if (index > -1) {
                // Remove unavailability
                unavailability[currentParticipant.name].splice(index, 1);
            } else {
                // Add unavailability
                unavailability[currentParticipant.name].push(dateKey);
            }

            saveData();
            renderCalendars();
            updateBestDates();
            updateParticipantsDisplay();
        }

        function isDateAvailableForAll(dateKey) {
            if (participants.length === 0) return false;
            
            for (let participant of participants) {
                if (unavailability[participant.name] && 
                    unavailability[participant.name].includes(dateKey)) {
                    return false;
                }
            }
            return true;
        }

        function getUnavailableParticipants(dateKey) {
            const unavailableList = [];
            participants.forEach(p => {
                if (unavailability[p.name] && unavailability[p.name].includes(dateKey)) {
                    unavailableList.push(p);
                }
            });
            return unavailableList;
        }

        function renderCalendars() {
            renderMonth(2026, 1, 'january');
            renderMonth(2026, 2, 'february');
        }

        function renderMonth(year, month, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            const firstDay = new Date(year, month - 1, 1).getDay();
            const daysInMonth = new Date(year, month, 0).getDate();

            // Empty days
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'day empty';
                container.appendChild(emptyDay);
            }

            // Days with numbers
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDiv = document.createElement('div');
                const dayOfWeek = new Date(year, month - 1, day).getDay();
                
                dayDiv.className = 'day';
                if (dayOfWeek === 0) dayDiv.classList.add('sunday');
                if (dayOfWeek === 6) dayDiv.classList.add('saturday');
                
                const dateKey = `${year}-${month}-${day}`;
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                dayDiv.appendChild(dayNumber);

                // Check if all participants are available
                const unavailableList = getUnavailableParticipants(dateKey);
                
                if (participants.length > 0) {
                    if (unavailableList.length === 0) {
                        // All available
                        dayDiv.classList.add('all-available');
                        const info = document.createElement('div');
                        info.className = 'day-info';
                        info.textContent = 'âœ“ ëª¨ë‘ ê°€ëŠ¥';
                        dayDiv.appendChild(info);
                    } else if (unavailableList.length === participants.length) {
                        // All unavailable
                        dayDiv.classList.add('all-unavailable');
                        const info = document.createElement('div');
                        info.className = 'day-info';
                        info.textContent = 'âœ— ëª¨ë‘ ë¶ˆê°€';
                        dayDiv.appendChild(info);
                    } else {
                        // Partial - show markers
                        const markers = document.createElement('div');
                        markers.className = 'day-markers';
                        unavailableList.forEach(p => {
                            const marker = document.createElement('div');
                            marker.className = 'marker';
                            marker.style.backgroundColor = p.color;
                            marker.title = `${p.name} ë¶ˆê°€`;
                            markers.appendChild(marker);
                        });
                        dayDiv.appendChild(markers);
                        
                        const info = document.createElement('div');
                        info.className = 'day-info';
                        info.textContent = `${unavailableList.length}ëª… ë¶ˆê°€`;
                        dayDiv.appendChild(info);
                    }
                }

                dayDiv.onclick = () => {
                    if (!dayDiv.classList.contains('all-unavailable') || 
                        (currentParticipant && unavailability[currentParticipant.name] && 
                         unavailability[currentParticipant.name].includes(dateKey))) {
                        toggleDate(year, month, day);
                    }
                };

                container.appendChild(dayDiv);
            }
        }

        function updateBestDates() {
            const content = document.getElementById('bestDates');
            
            if (participants.length === 0) {
                content.innerHTML = '<p>ì°¸ê°€ìë¥¼ ì¶”ê°€í•˜ê³  ì•ˆ ë˜ëŠ” ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>';
                return;
            }

            const availableDates = [];
            
            // Check all dates in January and February 2026
            for (let month = 1; month <= 2; month++) {
                const daysInMonth = new Date(2026, month, 0).getDate();
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = `2026-${month}-${day}`;
                    if (isDateAvailableForAll(dateKey)) {
                        availableDates.push({ month, day });
                    }
                }
            }

            if (availableDates.length === 0) {
                content.innerHTML = '<p style="font-size: 1.1em;">ğŸ˜¢ ëª¨ë‘ê°€ ê°€ëŠ¥í•œ ë‚ ì§œê°€ ì—†ìŠµë‹ˆë‹¤. ì¼ì •ì„ ì¡°ì •í•´ì£¼ì„¸ìš”!</p>';
                return;
            }

            const listDiv = document.createElement('div');
            listDiv.className = 'best-date-list';
            
            availableDates.forEach(date => {
                const item = document.createElement('div');
                item.className = 'best-date-item';
                item.textContent = `${date.month}ì›” ${date.day}ì¼`;
                listDiv.appendChild(item);
            });

            content.innerHTML = `<p style="margin-bottom: 15px; font-size: 1.1em;">ì´ ${availableDates.length}ì¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤! ğŸ‰</p>`;
            content.appendChild(listDiv);
        }

        async function resetCalendar() {
            if (!confirm('ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                return;
            }

            try {
                await window.storage.delete('calendar-participants', true);
                await window.storage.delete('calendar-unavailability', true);
                
                participants = [];
                currentParticipant = null;
                unavailability = {};
                
                updateParticipantsDisplay();
                renderCalendars();
                updateBestDates();
                
                alert('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                console.error('Error resetting calendar:', error);
                alert('ë°ì´í„° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Initialize
        loadData();
        
        // Sync data every 3 seconds to get real-time updates
        setInterval(syncData, 3000);

        // Initial render
        renderCalendars();
    </script>
</body>
</html>
